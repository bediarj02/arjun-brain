<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Brain Scroll — Video Scrub</title>
<style>
  html,body{margin:0;height:100%;background:#000;color:#fff;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  #wrap{position:fixed;inset:0;display:grid;place-items:center}
  video{width:100vw;height:100vh;object-fit:contain;background:#000}
  .scroller{height:500vh} /* bigger = slower/smoother; try 800vh if you want */
  .overlay{position:fixed;max-width:min(90ch,90vw);opacity:0;transition:opacity .25s ease;pointer-events:none}
  .overlay.show{opacity:1}
  .pos-left{left:4vw;top:15vh;text-align:left;font:600 2rem/1.25 system-ui}
  .pos-right{right:4vw;top:15vh;text-align:right;font:600 2rem/1.25 system-ui}
  .pos-bottom{left:50%;transform:translateX(-50%);bottom:6vh;text-align:center;font:600 1.5rem/1.3 system-ui}
</style>
</head>
<body>
  <div id="wrap">
    <!-- Keep muted+playsinline to avoid mobile autoplay restrictions -->
    <video id="vid" muted playsinline preload="auto" src="brain.mp4"></video>
  </div>

  <!-- CV overlays (edit these) -->
  <div id="ov1" class="overlay pos-left"> <h1>Frontal</h1><p>CV bullets here…</p></div>
  <div id="ov2" class="overlay pos-right"><h1>Temporal</h1><p>More text…</p></div>
  <div id="ov3" class="overlay pos-bottom"><h1>Wrap-up</h1><p>Contact • CTA</p></div>

  <div class="scroller"></div>

<script>
/* ======= CONFIG (edit these) ======= */
// show text between these scroll percentages (0..1)
const sections = [
  {el: '#ov1', start: 0.12, end: 0.22},   // 12%–22% of the scroll
  {el: '#ov2', start: 0.40, end: 0.52},   // 40%–52%
  {el: '#ov3', start: 0.75, end: 0.90}    // 75%–90%
];
/* =================================== */

const vid = document.getElementById('vid');
const overlays = sections.map(s => ({...s, node: document.querySelector(s.el)}));

function scrollT(){
  const max = document.body.scrollHeight - innerHeight;
  return max > 0 ? Math.min(1, Math.max(0, scrollY / max)) : 0;
}

async function ready(){
  if (vid.readyState >= 1) return; // HAVE_METADATA
  await new Promise(r => vid.addEventListener('loadedmetadata', r, {once:true}));
}

// Throttled scroll → set currentTime based on scroll %
let ticking = false;
addEventListener('scroll', () => {
  if (!ticking){
    requestAnimationFrame(() => {
      const t = scrollT();
      const dur = vid.duration || 0;
      if (dur) vid.currentTime = t * (dur - 0.001); // avoid hitting exactly the end
      overlays.forEach(s => s.node.classList.toggle('show', t >= s.start && t <= s.end));
      ticking = false;
    });
    ticking = true;
  }
}, {passive:true});

// Kick off
ready().then(() => {
  // draw first frame (Safari sometimes needs a tiny seek)
  if (vid.duration) { vid.currentTime = 0.001; }
});
</script>
</body>
</html>
